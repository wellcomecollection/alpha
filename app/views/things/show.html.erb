<% content_for :title, @thing.title %>

<% content_for :head do %>

  <meta name="twitter:card" content="product">
  <meta property="og:type" content="article" />

  <meta name="twitter:title" content="<%= @thing.title %>">
  <meta property="og:title" content="<%= @thing.title %>" />

  <% if @thing.cover_image_url %>
    <meta name="twitter:image" content="<%= thing.cover_image_url(1800,1800) %>">
    <meta property="og:image" content="<%= thing.cover_image_url(1800,1800) %>" />
  <% end %>

  <% if @thing.year %>
    <meta name="twitter:label1" content="Year of publication">
    <meta name="twitter:data1" content="<%= @thing.year %>">
  <% end %>

  <% if @thing.people.length == 1 %>
    <meta name="twitter:label2" content="Author">
    <meta name="twitter:data2" content="<%= @thing.people.first.name %>">
  <% elsif @thing.people.length > 1 %>
    <meta name="twitter:label2" content="Authors">
    <meta name="twitter:data2" content="<%= @thing.people.collect(&:name).to_sentence %>">
  <% end %>

  <meta property="og:url" content="<%= thing_url(@thing) %>" />

<% end %>

<% if @thing.people.length > 0 %>
  <div class="row author">
    <div class="twelve columns big">
      <p>
        <%= @thing.people.collect do |person| %>
          <% link_to person.name, person %>
        <% end.to_sentence.html_safe %>
        /
      </p>
    </div>
  </div>
<% end %>

<%= @thing.archives_tree.collect do |record|  %>
  <% link_to record.title, thing_path(record) %>
<% end.join(' / ').html_safe %>

<h1><%= @thing.title %></h1>

<% if @subjects.length > 0 %>
  <div class="row">
    <div class="two columns"><h4>Subjects</h4></div>
    <div class="ten columns big">
      <p>
        <%= @subjects.collect do |subject| %>
          <% link_to subject.label, subject %>
        <% end.to_sentence.html_safe %>
      </p>
    </div>
  </div>
<% end %>

<% if @thing.year || @thing.publishers %>
  <p>Published
    <% if @thing.year %>in <%= @thing.year %><% end %>
    <% if @thing.publishers %>by <%= @thing.publishers.to_sentence %><% end %>
  </p>
<% end %>

<% if @thing.collection %>
  <p>Part of the <%= content_tag 'span', "#{@thing.collection} collection", class: @thing.collection.downcase %></p>
<% end %>

<% if @thing.summary %>
  <div class="row nerds" style="clear: both;">
    <div class="four columns">
      <h4>Summary</h4>
    </div>
    <div class="eight columns">
      <div class="summary">
        <%= @thing.summary.html_safe %>
      </div>
    </div>
  </div>
<% end %>

<% if @thing.about %>
  <div class="row nerds" style="clear: both;">
    <div class="four columns">
      <h4>About</h4>
    </div>
    <div class="eight columns">
      <div class="about">
        <%= @thing.about.html_safe %>
      </div>
    </div>
  </div>
<% end %>

<% if @thing.pdf_file %>

  <embed src="<%= @thing.pdf_file %>" width="100%" height="600" pluginspage="http://www.adobe.com/products/acrobat/readstep2.html">

<% elsif @thing.image_urls.length > 0 %>
  <div style="width: 100%;background-color:#666;">
    <% url = @thing.image_urls(2000, 2000).first %>
    <%= link_to url do %>
      <%= image_tag url, style: 'width: 100%;' %>
    <% end %>
  </div>

  <% @thing.image_service_urls.drop(1).each do |image_service_url| %>
    <%= link_to "#{image_service_url}/full/!800,800/0/default.jpg" do %>
      <%= image_tag "#{image_service_url}/full/!200,200/0/default.jpg", style: 'width: auto;' %>
    <% end %>
  <% end %>

<% else %>
  <div class="row">
    <div class="twelve columns big">
  		<p class="nogo">This thing hasnâ€™t been digitized (yet), we think.</p>
		</div>
	</div>
<% end %>

<br clear="all" />
<br clear="all" />

<p>
  <a href="http://wellcomelibrary.org/item/<%= @thing.identifier %>">View on Wellcome Library</a> |
  <%= link_to "JSON data", thing_path(format: :json) %>
</p>